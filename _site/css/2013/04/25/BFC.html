<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width initial-scale=1">
    <title>小牛仔的blog</title>
    <meta name="description" content="小牛仔的blog">
    <link rel="stylesheet" href=" /css/main.css">
    <link rel="canonical" href="http://yourdomain.com/css/2013/04/25/BFC.html">
    <link rel="alternate" type="application/atom+xml" title="Your awesome title" href="http://yourdomain.com/feed.xml" />
    <base target="_blank"/>
</head>

    <body>
        <header class="site-header">
    <div class="wrapper">
        <a class="site-title" href="/">小牛仔的blog</a>
        <nav class="site-nav">
            <a href="#" class="menu-icon">

            </a>
            <div class="trigger">
                
                
                <a class="page-link" href="/about/">About</a>
                
                
                
                
                
                
                
                
            </div>
        </nav>
    </div>
</header>

        <div class="page-content">
            <div class="wrapper">
                <div class="post">

  <header class="post-header">
    <h1 class="post-title">BFC学习</h1>
    <p class="post-meta">Apr 25, 2013</p>
  </header>

  <article class="post-content">
    <h1 id="bfc">BFC</h1>

<p>BFC：Block Formatting Context</p>

<p>W3C CSS 2.1 规范中的一个概念，它决定了元素如何对其内容进行定位，以及与其他元素的关系和相互作用。可以理解为一种布局环境。</p>

<p>当一个元素处于BFC环境中，其子元素会一个接一个地放置。垂直方向上他们的起点是一个包含块的顶部，两个相邻的元素之间的垂直距离取决于 ‘margin’ 特性。在 Block Formatting Context 中相邻的块级元素的垂直边距会折叠（collapse）。</p>

<h2 id="bfc-1">如何开启BFC</h2>

<ul>
  <li>float的值不为none。</li>
  <li>overflow的值不为visible。 —&gt; 开启对子元素的有影响的BFC，而不对自身有作用</li>
  <li>display的值为table-cell, table-caption, inline-block中的任何一个。</li>
  <li>position的值不为relative和static。</li>
</ul>

<h2 id="bfc-2">BFC的意义</h2>

<h3 id="margin">解决垂直margin塌陷</h3>

<p>按照BFC的定义，只有同属于一个BFC时，两个元素才有可能发生垂直Margin的重叠，这个包括相邻元素，嵌套元素，只要他们之间没有阻挡(例如边框，非空内容，padding等)就会发生margin重叠。</p>

<p>因此要解决margin重叠问题，只要让它们不在同一个BFC就行了，但是对于两个相邻元素来说，意义不大，没有必要给它们加个外壳，但是对于嵌套元素来说就很有必要了，只要把父元素设为BFC就可以了。这样子元素的margin就不会和父元素的margin发生重叠了。</p>

<h3 id="section">清除内部元素浮动的</h3>

<h3 id="section-1">不和浮动元素重叠</h3>

<p>如果一个浮动元素后面跟着一个非浮动的元素，那么就会产生一个覆盖的现象。</p>

<h2 id="haslayout">微软的hasLayout</h2>

<p>一个IE 渲染树上才有的属性，并且只存在于<strong>IE7</strong>、 <strong>IE6</strong>。</p>

<h3 id="section-2">意义</h3>

<p>当一个对象的layout被激活时，它以及它的子渲染对象的定位和尺寸计算将独立进行，不受附近对象的干扰。<strong>也就是说它拥有一个独立的布局（layout）</strong>。因此浏览器要花费更多的代价来处理拥有haslayout的对象。</p>

<h3 id="section-3">激活</h3>

<ul>
  <li>
    <p>position: absolute</p>

    <p>设置绝对定位可能会引发新的问题。</p>
  </li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>float: left</td>
          <td>right</td>
        </tr>
      </tbody>
    </table>

    <p>IE下的浮动也会产生一些莫名其妙的问题。</p>
  </li>
  <li>
    <p>display: inline-block</p>

    <p>当一个内联元素需要haslayout属性时就需要用它，但是IE本身不支持inline-block的，只是表现得像标准里说的inline-block。</p>
  </li>
  <li>
    <p>width: 除’auto’外的任意值</p>

    <p>优先考虑使用该属性。</p>
  </li>
  <li>
    <p>height: 除’auto’外的任意值</p>

    <p>对 IE6 及更早版本来说很常用，该方法被称为霍莉破解(Holly hack)，即设定这个元素的高度为 1% (height:1%;)。但是要注意，当这个元素的 overflow 属性被设置为 visible 时，这个方法就失效了。</p>
  </li>
  <li>
    <p><strong>zoom: 除’normal’外的任意值</strong></p>

    <p>又一个ie私有属性，不兼容标准。zoom:1可以在测试或者不追求标准的情况下使用，效果不错。</p>
  </li>
  <li>
    <p>writing-mode: tb-rl</p>

    <p>ie私有属性，不推荐用。</p>
  </li>
  <li>
    <p>IE7 还有一些额外的属性：</p>

    <ul>
      <li>min-height: (任意值)</li>
      <li>max-height: (除 none 外任意值)</li>
      <li>min-width: (任意值)</li>
      <li>max-width: (除 none 外任意值)</li>
      <li>overflow: (除 visible 外任意值)</li>
      <li>overflow-x: (除 visible 外任意值)</li>
      <li>overflow-y: (除 visible 外任意值)</li>
      <li>position: fixed</li>
    </ul>
  </li>
</ul>

<h2 id="section-4">总结</h2>

<p>一句概括之：无论是w3c的bfc还是ie的hasLayout都是把元素以及其子元素的渲染独立出来计算，不再受其他元素影响。</p>

  </article>

</div>

            </div>
        </div>
        <footer class="site-footer"></footer>

    </body>
</html>
