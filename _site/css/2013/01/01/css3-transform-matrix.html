<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width initial-scale=1">
    <title>小牛仔的blog</title>
    <meta name="description" content="小牛仔的blog">
    <link rel="stylesheet" href=" /css/markdown.css">
    <link rel="stylesheet" href=" /css/main.css">
    <script type="text/javascript" src=" /js/jquery-2.0.3.min.js"></script>
    <link rel="canonical" href="http://young-cowboy.github.io//css/2013/01/01/css3-transform-matrix.html">
    <link rel="alternate" type="application/atom+xml" title="young cowboy site" href="http://young-cowboy.github.io//feed.xml" />
    <base target="_blank"/>
</head>

    <body>
        <div class="aside-wrap has-trans" id="J_AsideWrap">
            <div class="sidebar">
    <div class="user-avatar">
    </div>
    <ul class="categories-wrap" id="J_CategoryWrap">
        <li class="category J_Category active">全部文章</li>
        <li class="category J_Category" data-category="life">生活</li>
        <li class="category J_Category" data-category="reading">读书</li>
        <li class="category J_Category" data-category="css">CSS/CSS3</li>
        <li class="category J_Category" data-category="html">HTML/HTML5</li>
        <li class="category J_Category" data-category="javascript">JavaScript</li>
        <li class="category J_Category" data-category="git">Git</li>
        <li class="category J_Category" data-category="http">HTTP</li>
        <li class="category J_Category" data-category="node">Node</li>
        <li class="category J_Category" data-category="mongodb">MongoDB</li>
    </ul>
</div>
<span id="J_Arrow" class="icon-arrow"></span>
<div class="post-list" id="J_PostListWrap">
    <ul>
        
        <li data-category="life" class="J_PostLinkWrap">
            <a href="/life/2014/03/20/%E4%B9%B0%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98%E7%9A%84%E6%95%85%E4%BA%8B.html" class="post-link">买固态硬盘的故事<span class="post-date">Mar 20, 2014</span></a>
        </li>
        
        <li data-category="mongodb" class="J_PostLinkWrap">
            <a href="/mongodb/2013/06/08/mongodb%20CRUD.html" class="post-link">MongoDB CRUD<span class="post-date">Jun 8, 2013</span></a>
        </li>
        
        <li data-category="mongodb" class="J_PostLinkWrap">
            <a href="/mongodb/2013/05/24/geting%20start%20with%20mongo.html" class="post-link">Getting Start With Mongodb<span class="post-date">May 24, 2013</span></a>
        </li>
        
        <li data-category="javascript" class="J_PostLinkWrap">
            <a href="/javascript/2013/05/23/http.html" class="post-link">http协议浅学<span class="post-date">May 23, 2013</span></a>
        </li>
        
        <li data-category="css" class="J_PostLinkWrap">
            <a href="/css/2013/04/25/BFC.html" class="post-link">BFC学习<span class="post-date">Apr 25, 2013</span></a>
        </li>
        
        <li data-category="http" class="J_PostLinkWrap">
            <a href="/http/2013/03/30/cookie%E5%AD%A6%E4%B9%A0.html" class="post-link">cookie探索<span class="post-date">Mar 30, 2013</span></a>
        </li>
        
        <li data-category="html" class="J_PostLinkWrap">
            <a href="/html/2013/03/29/html5-filesystem.html" class="post-link">html5 file system<span class="post-date">Mar 29, 2013</span></a>
        </li>
        
        <li data-category="css" class="J_PostLinkWrap">
            <a href="/css/2013/03/29/css%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80.html" class="post-link">CSS 入门基础<span class="post-date">Mar 29, 2013</span></a>
        </li>
        
        <li data-category="html" class="J_PostLinkWrap">
            <a href="/html/2013/03/22/drag-and-drop.html" class="post-link">HTML5 Drag & Drop<span class="post-date">Mar 22, 2013</span></a>
        </li>
        
        <li data-category="node" class="J_PostLinkWrap">
            <a href="/node/2013/03/20/node%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0.html" class="post-link">nodejs 入门<span class="post-date">Mar 20, 2013</span></a>
        </li>
        
        <li data-category="javascript" class="J_PostLinkWrap">
            <a href="/javascript/2013/03/20/encoding.html" class="post-link">编码@前端开发<span class="post-date">Mar 20, 2013</span></a>
        </li>
        
        <li data-category="javascript" class="J_PostLinkWrap">
            <a href="/javascript/2013/01/29/history%20of%20js.html" class="post-link">Javascript历史<span class="post-date">Jan 29, 2013</span></a>
        </li>
        
        <li data-category="javascript" class="J_PostLinkWrap">
            <a href="/javascript/2013/01/29/high%20performance%20js.html" class="post-link">Hight Performance JS<span class="post-date">Jan 29, 2013</span></a>
        </li>
        
        <li data-category="javascript" class="J_PostLinkWrap">
            <a href="/javascript/2013/01/01/prototype%20chain.html" class="post-link">javascript 原型链<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="javascript" class="J_PostLinkWrap">
            <a href="/javascript/2013/01/01/js%20basic.html" class="post-link">javascript 基础学习<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="html" class="J_PostLinkWrap">
            <a href="/html/2013/01/01/html5%20up&down.html" class="post-link">《html5揭秘》学习笔记<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="html" class="J_PostLinkWrap">
            <a href="/html/2013/01/01/href.html" class="post-link">html href 浅谈<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="git" class="J_PostLinkWrap">
            <a href="/git/2013/01/01/git%20remote.html" class="post-link">Git remote<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="git" class="J_PostLinkWrap">
            <a href="/git/2013/01/01/getting%20start%20with%20git.html" class="post-link">Getting Start With Git<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="javascript" class="J_PostLinkWrap">
            <a href="/javascript/2013/01/01/execution_context_test.html" class="post-link">javascript 执行环境探索 测试题<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="javascript" class="J_PostLinkWrap">
            <a href="/javascript/2013/01/01/execution_context.html" class="post-link">javascript 执行环境探索<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="javascript" class="J_PostLinkWrap">
            <a href="/javascript/2013/01/01/domain.html" class="post-link">domain<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="git" class="J_PostLinkWrap">
            <a href="/git/2013/01/01/diff&patch.html" class="post-link">diff & patch<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="css" class="J_PostLinkWrap">
            <a href="/css/2013/01/01/css3-transform-matrix.html" class="post-link">CSS3 transform-matrix<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
    </ul>
</div>
        </div>
        <div class="markdown-ctn">
            <div class="post">

  <header class="post-header">
    <h1 class="post-title">CSS3 transform-matrix</h1>
    <p class="post-meta">Jan 1, 2013</p>
  </header>

  <article class="post-content">
    <h1 id="transformmatrix">深入理解transform的matrix</h1>

<blockquote>
  <p>数学真的是很重要。</p>
</blockquote>

<p>参考资料</p>

<ul>
  <li><a href="http://zh.wikipedia.org/wiki/%E4%BB%BF%E5%B0%84%E5%8F%98%E6%8D%A2"><strong>仿射变换</strong></a></li>
  <li><a href="http://www.useragentman.com/blog/2011/01/07/css3-matrix-transform-for-the-mathematically-challenged/comment-page-1"><strong>blog</strong>(需要翻墙)</a></li>
</ul>

<p>要理解matrix是需要一定的数学矩阵功底的。我们知道调用transform的函数rotate，scale，skew，translate到最后其实都是调用了matrix函数，只是浏览器帮你转化了。</p>

<p>首先我们要知道一个数学矩阵概念：<a href="http://zh.wikipedia.org/wiki/%E4%BB%BF%E5%B0%84%E5%8F%98%E6%8D%A2"><strong>仿射变换</strong></a>，就是这个矩阵实现了transform。</p>

<p>这里有篇<a href="http://www.useragentman.com/blog/2011/01/07/css3-matrix-transform-for-the-mathematically-challenged/comment-page-1"><strong>blog</strong></a>写的很好，它深入讲解了transform的matrix函数。</p>

<p><strong>注意</strong> transform-origin的会影响一个图形的基本点，间接影响4个坐标。</p>

<h2 id="section">例子</h2>

<p><strong>注意</strong>：一个图形没有transform时其matrix的默认参数是（1,0,0,1,0,0），你可以使用调试工具查看。</p>

<p>如果我们有一个图形（width:200px,height:100px），并且设置transform-origin:50% 50%。那么变换前4个坐标（<strong>相对于变形origin</strong>）为</p>

<pre><code>(-100px,-50px)
		|——————————|(100px,-50px)
		|	  *    |
		|——————————|(100px,50px)
(-100px,50px)
</code></pre>

<p>现在我们给它变换</p>

<pre><code>transform:matrix(3,4,5,6,100px,50px);
</code></pre>

<p>先算左上角经过变换的坐标值，我们会生成2个矩阵：matrix的参数矩阵和原先坐标矩阵</p>

<pre><code>| 3 5 100 |  
| 4 6 50  |   
| 0 0  1  |   

| -100 | 
|  -50 | 
|  -50 | 
|   1  |
</code></pre>

<p><strong>注意</strong>：3<em>3的矩阵和1</em>3的矩阵最下一行的 0，0,1  0是因为数学概念<strong>仿射变换</strong>预设的。当时我也困惑了很久知道了解放射变换。</p>

<pre><code>| 3 5 100 |   | -100 |   | 3*-100+5*-50+100*1|   | -450 | 
| 4 6 50  | * |  -50 | = | 4*-100+6*-50+50*1 | = | -650 |
| 0 0  1  |   |   1  |   | 0*-100+0*-50+1*1  |	 |   1  |
</code></pre>

<p>所以左上角的新坐标为 （-450px，-650px）</p>

<p>以此类推剩下的3个点坐标为</p>

<p>右上</p>

<pre><code>| 3 5 100 |   |  100 |   | 3*100+5*-50+100*1 |   |  150 | 
| 4 6 50  | * |  -50 | = | 4*100+6*-50+50*1  | = |  150 |
| 0 0  1  |   |   1  |   | 0*100+0*-50+1*1   |	 |   1  |
</code></pre>

<p>左下</p>

<pre><code>| 3 5 100 |   | -100 |   | 3*-100+5*50+100*1 |   |   50 | 
| 4 6 50  | * |   50 | = | 4*-100+6*50+50*1  | = |  -50 |
| 0 0  1  |   |   1  |   | 0*-100+0*50+1*1   |	 |   1  |
</code></pre>

<p>右下</p>

<pre><code>| 3 5 100 |   |  100 |   | 3*100+5*50+100*1  |   |  650 | 
| 4 6 50  | * |   50 | = | 4*100+6*50+50*1   | = |  750 |
| 0 0  1  |   |   1  |   | 0*-100+0*50+1*1   |	 |   1  |
</code></pre>

<p>所以新坐标为</p>

<pre><code>(-450px,-650px)
		|——————————|(150px,150px)
		|	  .    |
		|——————————|(650px,750px)
(50px,-50px)
</code></pre>

<h3 id="section-1">关于那些内置函数</h3>

<p>rotate，scale，skew，translate它们的参数最后都会转为matrix的参数，来变换。</p>


  </article>

</div>

        </div>
        <footer class="site-footer"></footer>
<script type="text/javascript" src=" /js/main.js"></script>

    </body>
</html>
