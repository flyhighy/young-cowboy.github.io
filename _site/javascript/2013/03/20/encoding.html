<!DOCTYPE html>
<html>
    <head>
    <title>编码@前端开发 - 小牛仔的的网络日志</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width initial-scale=1">
    <meta name="description" content="小牛仔的blog，记录读书、前端">
    <meta name="baidu-site-verification" content="BkO3uOVKCT" />
    <link rel="icon" href=" /images/icon.ico" type="image/x-icon">
    <link rel="stylesheet" href=" /css/markdown.css">
    <link rel="stylesheet" href=" /css/main.css">
    <script type="text/javascript" src=" /js/jquery-2.0.3.min.js"></script>
    <link rel="canonical" href="http://young-cowboy.github.io//javascript/2013/03/20/encoding.html">
    <link rel="alternate" type="application/atom+xml" title="young cowboy site" href="http://young-cowboy.github.io//feed.xml" />
</head>

    <body>
        <div class="aside-wrap has-trans" id="J_AsideWrap">
            <div class="sidebar">
    <div class="user-avatar">
    </div>
    <ul class="categories-wrap" id="J_CategoryWrap">
        <li class="category J_Category active">全部文章</li>
        <li class="category J_Category" data-category="life">生活</li>
        <li class="category J_Category" data-category="reading">读书</li>
        <li class="category J_Category" data-category="css">CSS/CSS3</li>
        <li class="category J_Category" data-category="html">HTML/HTML5</li>
        <li class="category J_Category" data-category="javascript">JavaScript</li>
        <li class="category J_Category" data-category="git">Git</li>
        <li class="category J_Category" data-category="http">HTTP</li>
        <li class="category J_Category" data-category="node">Node</li>
        <li class="category J_Category" data-category="mongodb">MongoDB</li>
    </ul>
</div>
<span id="J_Arrow" class="icon-arrow"></span>
<div class="post-list" id="J_PostListWrap">
    <ul>
        
        <li data-category="life" class="J_PostLinkWrap">
            <a href="/life/2014/03/20/%E4%B9%B0%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98%E7%9A%84%E6%95%85%E4%BA%8B.html" class="post-link">买固态硬盘的故事<span class="post-date">Mar 20, 2014</span></a>
        </li>
        
        <li data-category="mongodb" class="J_PostLinkWrap">
            <a href="/mongodb/2013/06/08/mongodb%20CRUD.html" class="post-link">MongoDB CRUD<span class="post-date">Jun 8, 2013</span></a>
        </li>
        
        <li data-category="mongodb" class="J_PostLinkWrap">
            <a href="/mongodb/2013/05/24/geting%20start%20with%20mongo.html" class="post-link">Getting Start With Mongodb<span class="post-date">May 24, 2013</span></a>
        </li>
        
        <li data-category="javascript" class="J_PostLinkWrap">
            <a href="/javascript/2013/05/23/http.html" class="post-link">http协议浅学<span class="post-date">May 23, 2013</span></a>
        </li>
        
        <li data-category="css" class="J_PostLinkWrap">
            <a href="/css/2013/04/25/BFC.html" class="post-link">BFC学习<span class="post-date">Apr 25, 2013</span></a>
        </li>
        
        <li data-category="http" class="J_PostLinkWrap">
            <a href="/http/2013/03/30/cookie%E5%AD%A6%E4%B9%A0.html" class="post-link">cookie探索<span class="post-date">Mar 30, 2013</span></a>
        </li>
        
        <li data-category="html" class="J_PostLinkWrap">
            <a href="/html/2013/03/29/html5-filesystem.html" class="post-link">html5 file system<span class="post-date">Mar 29, 2013</span></a>
        </li>
        
        <li data-category="css" class="J_PostLinkWrap">
            <a href="/css/2013/03/29/css%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80.html" class="post-link">CSS 入门基础<span class="post-date">Mar 29, 2013</span></a>
        </li>
        
        <li data-category="html" class="J_PostLinkWrap">
            <a href="/html/2013/03/22/drag-and-drop.html" class="post-link">HTML5 Drag & Drop<span class="post-date">Mar 22, 2013</span></a>
        </li>
        
        <li data-category="node" class="J_PostLinkWrap">
            <a href="/node/2013/03/20/node%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0.html" class="post-link">nodejs 入门<span class="post-date">Mar 20, 2013</span></a>
        </li>
        
        <li data-category="javascript" class="J_PostLinkWrap">
            <a href="/javascript/2013/03/20/encoding.html" class="post-link">编码@前端开发<span class="post-date">Mar 20, 2013</span></a>
        </li>
        
        <li data-category="javascript" class="J_PostLinkWrap">
            <a href="/javascript/2013/01/29/history%20of%20js.html" class="post-link">Javascript历史<span class="post-date">Jan 29, 2013</span></a>
        </li>
        
        <li data-category="javascript" class="J_PostLinkWrap">
            <a href="/javascript/2013/01/29/high%20performance%20js.html" class="post-link">Hight Performance JS<span class="post-date">Jan 29, 2013</span></a>
        </li>
        
        <li data-category="javascript" class="J_PostLinkWrap">
            <a href="/javascript/2013/01/01/prototype%20chain.html" class="post-link">javascript 原型链<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="javascript" class="J_PostLinkWrap">
            <a href="/javascript/2013/01/01/js%20basic.html" class="post-link">javascript 基础学习<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="html" class="J_PostLinkWrap">
            <a href="/html/2013/01/01/html5%20up&down.html" class="post-link">《html5揭秘》学习笔记<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="html" class="J_PostLinkWrap">
            <a href="/html/2013/01/01/href.html" class="post-link">html href 浅谈<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="git" class="J_PostLinkWrap">
            <a href="/git/2013/01/01/git%20remote.html" class="post-link">Git remote<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="git" class="J_PostLinkWrap">
            <a href="/git/2013/01/01/getting%20start%20with%20git.html" class="post-link">Getting Start With Git<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="javascript" class="J_PostLinkWrap">
            <a href="/javascript/2013/01/01/execution_context_test.html" class="post-link">javascript 执行环境探索 测试题<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="javascript" class="J_PostLinkWrap">
            <a href="/javascript/2013/01/01/execution_context.html" class="post-link">javascript 执行环境探索<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="javascript" class="J_PostLinkWrap">
            <a href="/javascript/2013/01/01/domain.html" class="post-link">domain<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="git" class="J_PostLinkWrap">
            <a href="/git/2013/01/01/diff&patch.html" class="post-link">diff & patch<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
        <li data-category="css" class="J_PostLinkWrap">
            <a href="/css/2013/01/01/css3-transform-matrix.html" class="post-link">CSS3 transform-matrix<span class="post-date">Jan 1, 2013</span></a>
        </li>
        
    </ul>
</div>
        </div>
        <div class="post">
    <header class="post-header">
        <h1 class="post-title" style="font-size: 34px;">编码@前端开发</h1>
        <p class="post-meta">Mar 20, 2013</p>
    </header>
    <div class="markdown-ctn-wrap">
        <div class="markdown-ctn">
            <h1 id="encode">Encode</h1>

<p>参考资料</p>

<ul>
  <li><a href="http://www.slideshare.net/guestf749d5/ss-3812216">编码大全</a></li>
  <li><a href="http://www.ruanyifeng.com/blog/2010/02/url_encoding.html">关于URL编码</a></li>
  <li><a href="http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html">字符编码笔记：ASCII，Unicode和UTF-8</a></li>
</ul>

<p>编码：用预先规定的方法将文字、数字或其他对象编成数码。说白了编码就是一种状态变为另一种状态的规则。</p>

<h2 id="ascii">ASCII</h2>

<p>八位长度，只能表示2^7个字符，最高位为<strong>校验位</strong>，但是只能表示英文，所以需要国际化。</p>

<pre><code>0 000  0000 ~0 111  1111
	0	  ~		127
</code></pre>

<h2 id="ascii-1">基于ASCII的国际化</h2>

<ul>
  <li>西欧的字符集ISO8859-X</li>
  <li>东亚的字符集GB2312（简体中文）,BIG5（繁体中文），SJIS（日文）</li>
</ul>

<p>都是由ASCII演变而来，并且每个子集互不兼容，所以我们需要更大范围的编码来表示字符集。</p>

<h4 id="gbk">GBK</h4>

<p>GBK扩充了GB2312,可以显示简体/繁体中文</p>

<h4 id="gb18030">GB18030</h4>

<p>对GBK的再次扩充，支持日文/韩文/简体/繁体/藏文/满文…</p>

<h3 id="ansi">ANSI</h3>

<p><strong>双字节编码的统称</strong>，根据OS的编码来智能保存文件。</p>

<p>eg中文操作系统中表示<strong>GB2312</strong>,日文为<strong>SJIS</strong>。</p>

<h2 id="unicode">另一种国际化Unicode</h2>

<p>Unicode 联盟开发了 Unicode 标准。用32位描述字符集。但是可能用32位描述一个字符造成空间浪费的问题。比如只要一个字节就可以储存的英文。</p>

<h3 id="unicode--utf">Unicode &amp; UTF</h3>

<p>对可以用ASCII表示的字符使用UNICODE并不高效，因为UNICODE比ASCII占用大一倍的空间，而对ASCII来说高字节的0对他毫无用处。为了解决这个问题，就出现了一些中间格式的字符集，他们被称为通用转换格式，即UTF（Universal Transformation Format）。目前存在的UTF格式有：UTF-7,UTF-7.5,UTF-8,UTF-16，以及 UTF-32。可以说utf系列是对unicode的实现~</p>

<h3 id="utf-8">UTF-8</h3>

<p>UTF-8最大的一个特点，就是它是一种变长的编码方式。它可以使用1~4个字节表示一个符号，根据不同的符号而变化字节长度。</p>

<p>0x00 到 0x7F（0111 1111）和ASCII相同。故兼容ASCII编码。</p>

<h4 id="demo">Demo</h4>

<p>在unicode中规定了“严”的unicode为0100 1110 0010 0101（4E25）。那么utf-8有一个算法计算“严”的utf-8编码。</p>

<pre><code>escape("严")//=&gt;"%u4E25"

Unicode符号范围		| UTF-8编码方式
(十六进制) 			  | （二进制）
-----------------------------------------------------------
0000 0000 ~ 0000 007F | 0xxxxxxx
0000 0080 ~ 0000 07FF | 110xxxxx 10xxxxxx
0000 0800 ~ 0000 FFFF | 1110xxxx 10xxxxxx 10xxxxxx
0001 0000 ~ 0010 FFFF | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
</code></pre>

<p>从unicode的最后一位反推推出 为 1110<strong>0100</strong> 10<strong>111000</strong> 10<strong>100101</strong> =&gt;E4B8A5</p>

<h2 id="encode-1">Encode@前端</h2>

<h3 id="url">URL编码。</h3>

<h4 id="uri--url">URI &amp; URL</h4>

<p><strong>URL为URI的子集</strong>。URL在万维网的环境下诞生的，URI早已在互联网时期诞生了。都是描述资源的位置。</p>

<p>RFC 1738规定URL必须由英文字母、数字、和某些标点符号组成。所以当我们想通过URL给server传递一些信息。就必须要将信息编码。</p>

<p>当浏览器发现你的URL不符合规范时，它会默认使用一种编码（GBK,UTF-8等等）帮为你的URL中不符合URL规范的部分进行编码。</p>

<h3 id="uri">按照URI生成方式分类编码规则</h3>

<h4 id="uri-1">由地址栏直接输入的<strong>路径</strong>为非URI规范字符</h4>

<p>用utf-8编码字符</p>

<h4 id="uri-2">由地址栏直接输入的查询<strong>字符</strong>为非URI规范字符</h4>

<p>ie, firefox 用os的编码字符</p>

<p>chrome 用utf-8编码查询字符</p>

<h4 id="uri-3">页面内容的链接字符为非URI规范字符</h4>

<p>用页面的编码规则</p>

<h4 id="jsuriuri">js生成URI中有非URI规范字符</h4>

<p>IE根据os的编码</p>

<p>chrome、firefox为utf-8编码</p>

<p>怎么多种情况只有在浏览器接收到url前对url处理才可以</p>

<ul>
  <li>escape</li>
  <li>encodeURI</li>
  <li>encodeURIComponent</li>
</ul>

<h4 id="section">区分</h4>

<p>encodeURI是对uri进行编码，encodeURIComponent功能是URI的某个部分编码（参数什么的），当用encodeURIComponent对整个URI编码时会出现问题，其功能不是对URI编码，而是对URI部分编码。</p>

<pre><code>var uri="http://www.baidu.com";
encodeURI(",/?:@&amp;=+$#")//=&gt;,/?:@&amp;=+$#
encodeURI(uri);//=&gt;"http://www.baidu.com"
encodeURIComponent(",/?:@&amp;=+$#")//=&gt;%2C%2F%3F%3A%40%26%3D%2B%24%23
encodeURIComponent(uri);//=&gt;"http%3A%2F%2Fwww.baidu.com"
</code></pre>

            <p>(完)</p>
        </div>
    </div>
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="请将此处替换成文章在你的站点中的ID" data-title="编码@前端开发" id="J_DSWrap"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
        $("#J_DSWrap").attr("data-url", location.protocol + "//" + location.host + location.pathname);
        $("#J_DSWrap").attr("data-thread-key", location.pathname);
        var duoshuoQuery = {short_name : "young-cowboy"};
        (function () {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';
            ds.async = true;
            ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0]
                    || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
    <!-- 多说公共JS代码 end -->
</div>

        <footer class="site-footer"></footer>
<script type="text/javascript" src=" /js/main.js"></script>

    </body>
</html>
